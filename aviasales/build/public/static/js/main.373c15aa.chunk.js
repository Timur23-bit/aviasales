(this.webpackJsonpaviasales=this.webpackJsonpaviasales||[]).push([[0],{122:function(e,t,n){},189:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"all",(function(){return O})),n.d(r,"noAll",(function(){return g})),n.d(r,"noStops",(function(){return x})),n.d(r,"one",(function(){return v})),n.d(r,"two",(function(){return k})),n.d(r,"three",(function(){return y})),n.d(r,"quickly",(function(){return N})),n.d(r,"less",(function(){return _})),n.d(r,"getTickets",(function(){return T})),n.d(r,"getId",(function(){return E}));var c=n(4),s=(n(0),n(17)),a=n.n(s),i=(n(122),n(39)),o=n(41),l=n(84),u=n(85),f=n(35),d=n(34),j=n.n(d),b=n(49),m=n(86),p=n(87),h=new(function(){function e(){Object(m.a)(this,e),this.apiBase="https://aviasales-test-api.java-mentor.com/"}return Object(p.a)(e,[{key:"getResource",value:function(){var e=Object(b.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this.apiBase).concat(t));case 2:if(500!=(n=e.sent).status){e.next=5;break}return e.abrupt("return",this.getResource(t));case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getSearchId",value:function(){var e=Object(b.a)(j.a.mark((function e(){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getResource("search");case 2:return t=e.sent,n=t.json(),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}()),O=function(e){return{type:"ALL",checked:e}},g=function(e){return{type:"NO_ALL",checked:e}},x=function(e){return{type:"NO_STOPS",checked:e}},v=function(e){return{type:"ONE",checked:e}},k=function(e){return{type:"TWO",checked:e}},y=function(e){return{type:"THREE",checked:e}},N=function(){return{type:"QUICK"}},_=function(){return{type:"LESS"}},T=function(e){return function(t){h.getResource("tickets?searchId=".concat(e)).then(function(){var e=Object(b.a)(j.a.mark((function e(n){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.ok){e.next=2;break}throw new Error("Error number ".concat(n.status));case 2:return e.next=4,n.json();case 4:r=e.sent,t({type:"GET_TICKETS",payload:{tickets:r}});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){t({type:"GET_ERROR",payload:{error:e,loading:!1}})}))}},E=function(){return function(e){h.getSearchId().then((function(t){e({type:"GET_ID",id:t.searchId})}))}},S=n.p+"static/media/Logo.e2d2505b.svg",w=n(193),L=n(88);function I(){return Object(c.jsx)("div",{className:"example",children:Object(c.jsx)(L.a,{size:"large"})})}var R=n.p+"static/media/S7 Logo (1).cafb13c3.svg";function M(e){var t=e.segments,n=t.date,r=new Date(n),s="".concat(t.duration/60|0,"\u0447 ").concat(t.duration%60,"\u043c\u0438\u043d"),a=r.getUTCHours(),i=r.getUTCMinutes(),o=(r.getUTCHours()+(t.duration/60|0))%24,l=(r.getUTCMinutes()+t.duration)%60,u=t.stops.length;return u+=u>1?" \u041f\u0415\u0420\u0415\u0421\u0410\u0414\u041a\u0418":1==u?" \u041f\u0415\u0420\u0415\u0421\u0410\u0414\u041a\u0410":" \u041f\u0415\u0420\u0415\u0421\u0410\u0414\u041e\u041a",i<10&&(i="0".concat(i)),a<10&&(a="0".concat(a)),l<10&&(l="0".concat(l)),o<10&&(o="0".concat(o)),Object(c.jsxs)("div",{className:"segment",children:[Object(c.jsxs)("div",{className:"distance",children:[Object(c.jsxs)("p",{className:"gray",children:[t.origin,"-",t.destination]}),Object(c.jsxs)("p",{className:"black",children:["".concat(a,":").concat(i)," ","-"," ","".concat(o,":").concat(l)," "]})]},Math.random()),Object(c.jsxs)("div",{className:"duration",children:[Object(c.jsx)("p",{className:"gray",children:"\u0412 \u041f\u0423\u0422\u0418"}),Object(c.jsx)("p",{className:"black",children:s})]},Math.random()),Object(c.jsxs)("div",{className:"stops",children:[Object(c.jsx)("p",{className:"gray",children:u}),Object(c.jsx)("p",{className:"black",children:t.stops.join(", ")})]},Math.random())]},Math.random())}function C(e){var t=e.dataBase;return 0==t.length?Object(c.jsx)(I,{}):Object(c.jsx)(w.b,{itemLayout:"vertical",pagination:{pageSize:5},dataSource:t,renderItem:function(e){return Object(c.jsxs)("li",{className:"card",children:[Object(c.jsxs)("div",{className:"card__header",children:[Object(c.jsx)("div",{className:"price",children:function(e){var t=String(e);return t.length>5?"".concat(t.slice(0,3)," ").concat(t.slice(3,t.length)," \u0420"):t.length>3?"".concat(t.slice(0,2)," ").concat(t.slice(2,t.length)," \u0420"):"".concat(t)}(e.price)}),Object(c.jsx)("div",{className:"logotip",children:Object(c.jsx)("img",{src:R,alt:"Logotip"})})]}),Object(c.jsx)(M,{segments:e.segments[0]},Math.random()),Object(c.jsx)(M,{segments:e.segments[1]},Math.random())]},Math.random())}},Math.random())}n(174);var q=Object(i.b)((function(e){return e}),r)((function(e){var t=e.item,n=e.all,r=e.noAll,s=e.noStops,a=e.one,i=e.two,o=e.three,l=t.fil,u=l.mess,f=l.bool,d="filter__menu";return f&&(d="filter__menu active"),Object(c.jsx)("div",{children:Object(c.jsxs)("label",{className:d,children:[Object(c.jsx)("input",{checked:f,type:"checkbox",onChange:function(e){switch(u){case"\u0412\u0441\u0435":return n(e.target.checked);case"\u0411\u0435\u0437 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a":return s(e.target.checked),r();case"1 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430":return a(e.target.checked),r();case"2 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438":return i(e.target.checked),r();case"3 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438":return o(e.target.checked),r();default:return a()}}}),Object(c.jsx)("span",{children:u})]})},Math.random())})),B=n(194);function A(){return Object(c.jsx)(B.a,{message:"\u0420\u0435\u0439\u0441\u043e\u0432, \u043f\u043e\u0434\u0445\u043e\u0434\u044f\u0449\u0438\u0445 \u043f\u043e\u0434 \u0437\u0430\u0434\u0430\u043d\u043d\u044b\u0435 \u0444\u0438\u043b\u044c\u0442\u0440\u044b, \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e",description:"",type:"info"})}var K=Object(i.b)((function(e){return{filter:e.filter,sort:e.sort,loading:e.loading,error:e.error,tickets:e.tickets,id:e.id}}),r)((function(e){var t,n=e.getId,r=e.getTickets,s=e.less,a=e.quickly,i=e.filter,o=e.sort,l=e.loading,u=e.error,d=e.tickets,j=e.id,b=[],m=document.querySelector(".ant-list-pagination");j?l||r(j):n(j),"Error number 500"===u.message&&r(j),!l&&m&&(m.className="display"),i[0].fil.bool?b=d:i.map((function(e){if("\u0412\u0441\u0435"!==e.fil.mess)switch(e.fil.mess){case"\u0411\u0435\u0437 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a":var t;if(e.fil.bool)(t=b).push.apply(t,Object(f.a)(d.filter((function(e){return 0===e.segments[0].stops.length}))));return b;case"1 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430":var n;if(e.fil.bool)(n=b).push.apply(n,Object(f.a)(d.filter((function(e){return 1===e.segments[0].stops.length}))));return b;case"2 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438":var r;if(e.fil.bool)(r=b).push.apply(r,Object(f.a)(d.filter((function(e){return 2===e.segments[0].stops.length}))));return b;case"3 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438":var c;if(e.fil.bool)(c=b).push.apply(c,Object(f.a)(d.filter((function(e){return 3===e.segments[0].stops.length}))));return b;default:return d}return b})),o.cheaper?b.sort((function(e,t){return e.price>t.price?1:e.price===t.price?0:-1})):o.quick&&b.sort((function(e,t){return e.segments[0].duration>t.segments[0].duration?1:e.segments[0].duration===t.segments[0].duration?0:-1}));var p=l||0===b.length?null:Object(c.jsx)(I,{});function h(e){document.querySelectorAll(".sort__menu").forEach((function(e){e.className="sort__menu"})),e.target.className="sort__menu select"}return t=0===b.length?Object(c.jsx)(A,{}):Object(c.jsx)(C,{dataBase:b}),Object(c.jsxs)("div",{className:"art",children:[Object(c.jsx)("div",{className:"logo",children:Object(c.jsx)("img",{src:S,alt:"Logo"})}),Object(c.jsxs)("div",{className:"app",children:[Object(c.jsxs)("div",{className:"filter",children:[Object(c.jsx)("div",{className:"filter__title",children:"\u041a\u041e\u041b\u0418\u0427\u0415\u0421\u0422\u0412\u041e \u041f\u0415\u0420\u0415\u0421\u0410\u0414\u041e\u041a"}),i.map((function(e){return Object(c.jsx)(q,{item:e},Math.random())}))]}),Object(c.jsxs)("div",{className:"orders",children:[Object(c.jsxs)("div",{className:"sort",children:[Object(c.jsx)("div",{role:"button",className:"sort__menu",style:{borderBottomLeftRadius:"5px",borderTopLeftRadius:"5px"},onClick:function(e){h(e),s()},onKeyPress:function(){},children:"\u0421\u0410\u041c\u042b\u0419 \u0414\u0415\u0428\u0415\u0412\u042b\u0419"}),Object(c.jsx)("div",{role:"button",className:"sort__menu",style:{borderBottomRightRadius:"5px",borderTopRightRadius:"5px"},onClick:function(e){h(e),a()},onKeyPress:function(){},children:"\u0421\u0410\u041c\u042b\u0419 \u0411\u042b\u0421\u0422\u0420\u042b\u0419"})]}),Object(c.jsxs)("div",{className:"list",children:[t,p]})]})]})]})})),U=n(8),G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{filter:[{fil:{mess:"\u0412\u0441\u0435",bool:!0}},{fil:{mess:"\u0411\u0435\u0437 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a",bool:!0}},{fil:{mess:"1 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430",bool:!0}},{fil:{mess:"2 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438",bool:!0}},{fil:{mess:"3 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438",bool:!0}}],sort:{quick:!1,cheaper:!1},tickets:[],loading:!1,error:{},id:""},t=arguments.length>1?arguments[1]:void 0;if("ALL"===t.type)return e.filter[0].bool,Object(U.a)(Object(U.a)({},e),{},{filter:e.filter.map((function(e){return{fil:{bool:t.checked,mess:e.fil.mess}}}))});if("NO_ALL"===t.type){var n=e.filter.filter((function(e){return"\u0412\u0441\u0435"!==e.fil.mess})),r=n.filter((function(e){return e.fil.bool}));return 4===r.length?Object(U.a)(Object(U.a)({},e),{},{filter:e.filter.map((function(e){return"\u0412\u0441\u0435"===e.fil.mess?{fil:{mess:e.fil.mess,bool:!0}}:e}))}):Object(U.a)(Object(U.a)({},e),{},{filter:e.filter.map((function(e){return"\u0412\u0441\u0435"===e.fil.mess?{fil:{mess:e.fil.mess,bool:!1}}:e}))})}return"NO_STOPS"===t.type?Object(U.a)(Object(U.a)({},e),{},{filter:e.filter.map((function(e){return"\u0411\u0435\u0437 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a"===e.fil.mess?{fil:{mess:e.fil.mess,bool:t.checked}}:e})),sort:{quick:!1,cheaper:!1}}):"ONE"===t.type?Object(U.a)(Object(U.a)({},e),{},{filter:e.filter.map((function(e){return"1 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430"===e.fil.mess?{fil:{mess:e.fil.mess,bool:t.checked}}:e}))}):"TWO"===t.type?Object(U.a)(Object(U.a)({},e),{},{filter:e.filter.map((function(e){return"2 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438"===e.fil.mess?{fil:{mess:e.fil.mess,bool:t.checked}}:e}))}):"THREE"===t.type?Object(U.a)(Object(U.a)({},e),{},{filter:e.filter.map((function(e){return"3 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438"===e.fil.mess?{fil:{mess:e.fil.mess,bool:t.checked}}:e}))}):"LESS"===t.type?Object(U.a)(Object(U.a)({},e),{},{sort:{quick:!1,cheaper:!0}}):"QUICK"===t.type?Object(U.a)(Object(U.a)({},e),{},{sort:{quick:!0,cheaper:!1}}):"GET_TICKETS"===t.type?Object(U.a)(Object(U.a)({},e),{},{tickets:[].concat(Object(f.a)(e.tickets),Object(f.a)(t.payload.tickets.tickets)),loading:t.payload.tickets.stop}):"GET_ID"===t.type?Object(U.a)(Object(U.a)({},e),{},{id:t.id}):e},D=Object(o.createStore)(G,Object(u.composeWithDevTools)(Object(o.applyMiddleware)(l.a)));D.subscribe((function(){a.a.render(Object(c.jsx)(i.a,{store:D,children:Object(c.jsx)(K,{})}),document.getElementById("root"))})),a.a.render(Object(c.jsx)(i.a,{store:D,children:Object(c.jsx)(K,{})}),document.getElementById("root"))}},[[189,1,2]]]);
//# sourceMappingURL=main.373c15aa.chunk.js.map